<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NSTP Hazard Mapping</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <link href='https://fonts.googleapis.com/css?family=Hind' rel='stylesheet'>

  <!--Load Leaflet from CDN-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>

  <!--Load Esri Leaflet from CDN-->
  <script src="https://unpkg.com/esri-leaflet@2.4.1/dist/esri-leaflet.js"
    integrity="sha512-xY2smLIHKirD03vHKDJ2u4pqeHA7OQZZ27EjtqmuhDguxiUvdsOuXMwkg16PQrm9cgTmXtoxA6kwr8KBy3cdcw=="
    crossorigin=""></script>

  <!--Load Esri Leaflet Geocoder from CDN-->
  <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.css"
    integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
    crossorigin="">
  <script src="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.js"
    integrity="sha512-HrFUyCEtIpxZloTgEKKMq4RFYhxjJkCiF5sDxuAokklOeZ68U2NPfh4MFtyIVWlsKtVbK5GD2/JzFyAfvT5ejA=="
    crossorigin=""></script>

  <!--Load CSS sheets and Firestore Database-->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/form.css">
  <script type="module" src="js/firestore.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <!-- Side bar, Top Bar, and Map -->
  <div class="main">
    <div class="sidenav">
      <!-- Search Bar -->
      <div class="buttons">
        <input class="search-bar" type="search" placeholder="Search... " oninput="searchEntries()">
      </div>
      <!-- Add Household Form -->
      <button class="container label-font" id="addHousehold" name="addHousehold">+ Add a Household</button>
      <!-- List of Entries -->
      <div class="entries">
        <ul id="locationList" class="accordion">
        </ul>
      </div>
    </div>
    <!-- Logout Button -->
    <div class="top-bar">
      <button class="button-logout"><img class="logoutIcon" src="./img/logout.256x256.png" alt="logout"> Logout</button>
    </div>
    <!-- Map -->
    <div class="map-container">
      <div id="map">
      </div>
    </div>
  </div>

  <!-- Modals of Entries -->
  <div id="partnerModal" class="modal">
    <!-- Modal Header: includes household owner -->
    <div class="modal-header">
      <h1 id="modalHeader" class="modal-name"></h1>
      <span class="close">&times;</span>
    </div>
    <!-- Modal Content: content of the entries -->
    <div class="modal-content">
      <!-- Div for contact no. and address -->
      <br>
      <div>
        <p class="modal-text" id="entry_contact_number">This is the Household's contact number</p>
        <p class="modal-text" id="entry_address">This is the geolocation of the household that is not truncated. This is the geolocation of the partner that is not truncated. This is the geolocation of the partner that is not truncated.</p>
      </div>
      <!-- Div for residency status and part of HOA/NOA labels -->
      <div class="modal-line">
        <label class="modal-label" style="width: 220px;">Residency Status</label>
        <label class="modal-label" style="width: 220px;">Part of HOA / NOA</label>
      </div>
      <!-- Div for residency status and part of HOA/NOA content -->
      <div class="modal-line">
        <p class="modal-text" id="entry_residency_status" style="width: 220px;">Residency Status</p>
        <p class="modal-text" id="entry_HOA/NOA" style="width: 220px;">Part of HOA / NOA</label>
      </div>
      <!-- Div for evacuation area -->
      <div>
        <label class="modal-label">Nearest Evacuation Area</label>
        <p class="modal-text" id="entry_nearest_evacuation_area">Nearest Evacuation Area</p>
      </div>
      <!-- Risk Levels -->
      <button type="button" class="collapsible">Risk Levels</button>
      <div class="colcontent" style="display: block;">
        <div class="modal-line">
          <label class="modal-label">Earthquake</label>
          <label class="modal-label" id="entry_earthquake_risk_level">RISK LEVEL</label>
        </div>
        <div>
          <p class="modal-text" id="entry_earthquake_desc">This is the description of the risk level that is not truncated. This is the description of the risk level that is not truncated. This is the description of the risk level that is not truncated.</p>
        </div>
        <div class="modal-line">
          <label class="modal-label">Fire</label>
          <label class="modal-label" id="entry_fire_risk_level">RISK LEVEL</label>
        </div>
        <div>
          <p class="modal-text" id="entry_fire_desc">Sample text</p>
        </div>
        <div class="modal-line">
          <label class="modal-label">Flood</label>
          <label class="modal-label" id="entry_flood_risk_level">RISK LEVEL</label>
        </div>
        <div>
          <p class="modal-text" id="entry_flood_desc">Sample text</p>
        </div>
        <div class="modal-line">
          <label class="modal-label">Landslide</label>
          <label class="modal-label" id="entry_landslide_risk_level">RISK LEVEL</label>
        </div>
        <div>
          <p class="modal-text" id="entry_landslide_desc">Sample text</p>
        </div>
        <div class="modal-line">
          <label class="modal-label">Storm</label>
          <label class="modal-label" id="entry_storm_risk_level">RISK LEVEL</label>
        </div>
        <div>
          <p class="modal-text" id="entry_storm_desc">Sample text</p>
        </div>
      </div>
      <!-- Residents -->
      <button type="button" class="collapsible">Residents</button>
      <div class="colcontent" style="display: block;">
        <br>
        <div class="modal-line">
          <label class="modal-label">Total</label>
          <label class="modal-label" id="entry_number_of_residents">0</label>
        </div>
        <hr style="border-top: 1px solid #CBD5E0;">
        <div class="modal-line">
          <label class="modal-label">Minors</label>
          <label class="modal-label" id="entry_number_of_minor_residents">0</label>
        </div>
        <br>
        <div class="modal-line">
          <label class="modal-label">Seniors</label>
          <label class="modal-label" id="entry_number_of_senior_residents">0</label>
        </div>
        <br>
        <div class="modal-line">
          <label class="modal-label">PWD</label>
          <label class="modal-label" id="entry_number_of_pwd_residents">0</label>
        </div>
        <br>
        <div class="modal-line">
          <label class="modal-label">Sick</label>
          <label class="modal-label" id="entry_number_of_sick_residents">0</label>
        </div>
        <br>
        <div class="modal-line">
          <label class="modal-label" >Pregnant</label>
          <label class="modal-label" id="entry_number_of_pregnant_residents">0</label>
        </div>
        <br>
      </div>
    </div>
    <!-- Modal footer: contains edit and delete buttons -->
    <div class="modal-footer">
      <div class="modal-line">
        <button class="modal-button" type="submit" id="submit_form" name="submit_form" style="color:#D64747">Delete &nbsp;&nbsp;<img src="./img/delete.png" alt="delete" style="height: 20px; width: 20px;"></button>   
        <button class="modal-button" id="editHousehold" name="submit_form" style="color:#3D97AF">Edit   &nbsp;&nbsp;<img src="./img/edit.png" alt="edit" style="height: 20px; width: 20px;"></button>   
      </div>
    </div>
  </div>

  <!-- Modal for add household form -->
  <div id="form-modal" class="form-modal" style="display: none;">
    <!-- Modal Header: includes title and address -->
    <div class="form-modal-header">
      <span class="close-form">&times;</span>
      <h1 class="form-header">Add Household</h1>
    </div>
    <!-- Modal Content: everything else -->
    <div class="form-modal-content">
      <h2 class="sub-header">HOUSEHOLD INFORMATION</h2>
      <br>
      <!-- Form Proper -->
      <div class="input_container">
          <label class="form" for="household_name">Household Name</label>
          <input type="text" id="household_name" name="household_name" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="address">Address</label>
          <input type="text" id="address" name="address" class="attribs">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="contact_number">Contact Number</label>
          <input type="text" id="contact_number" name="contact_number" class="attribs">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="residency_status">Residency Status</label>
          <input type="text" id="residency_status" name="residency_status" class="attribs"> 
      </div>
      <br>
      <div class="input_container" style="justify-content: flex-start;">
          <label class="form" for="HOA/NOA">Part of HOA / NOA</label>
          <input type="checkbox" id="HOA/NOA" name="HOA/NOA" class="attribs" style="height: 30px;">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="materials_used_for_house">Materials Used for House</label>
          <input type="text" id="materials_used_for_house" name="materials_used_for_house" class="attribs"> 
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="nearest_evacuation_area">Nearest Evacuation Area</label>
          <input type="text" id="nearest_evacuation_area" name="nearest_evacuation_area" class="attribs">    
      </div>
      <br>
      <h2 class="sub-header">RESIDENT INFORMATION</h2>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_residents">Number of Residents</label>
          <input type="text" id="number_of_residents" name="number_of_residents" class="attribs">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_minor_residents">Number of Minor Residents</label>
          <input type="text" id="number_of_minor_residents" name="number_of_minor_residents" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_senior_residents">Number of Senior Citizen Residents</label>
          <input type="text" id="number_of_senior_residents" name="number_of_senior_residents" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_pwd_residents">Number of PWD Residents</label>
          <input type="text" id="number_of_pwd_residents" name="number_of_pwd_residents" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_sick_residents">Number of Sick Residents</label>
          <input type="text" id="number_of_sick_residents" name="number_of_sick_residents" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_pregnant_residents">Number of Pregnant Residents</label>
          <input type="text" id="number_of_pregnant_residents" name="number_of_pregnant_residents" class="attribs">
      </div>
      <br>
      <h2 class="sub-header">RISK LEVELS</h2>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="earthquake">Earthquake</label>
          <select name="earthquake_level" id="earthquake" class="attribs">
              <option value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="text" id="earthquake" name="earthquake" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="fire">Fire</label>
          <select name="fire_level" id="fire" class="attribs">
              <option value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="text" id="fire" name="fire" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="flood">Flood</label>
          <select name="flood_level" id="flood" class="attribs">
              <option value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="flood" name="flood" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="landslide">Landslide</label>
          <select name="landslide_level" id="landslide" class="attribs">
              <option value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="landslide" name="landslide" class="attribs">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="storm">Storm</label>
          <select name="storm_level" id="storm" class="attribs">
              <option value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="storm" name="storm" class="attribs">
      </div>
      <!-- Save and Delete buttons -->
      <div class="button-container">
        <div>
          <!-- Submits contents of the form -->                                               
          <button class="confirm form" type="submit" id="submit_form" name="submit_form">Save</button>   
        </div>
        <div>
          <!-- Clears all contents of the form -->
          <button class="clear form">Delete</button>
        </div>
      </div>
    </div>

    <!-- Modal Footer: empty space (for design) -->
     <div class="formModalFooter"></div>
  </div>

  <!-- Modal for edit household form -->
  <div id="editForm-modal" class="form-modal" style="display: none;">
    <!-- Modal Header: includes title and address -->
    <div class="form-modal-header">
      <span class="close-editForm">&times;</span>
      <h1 class="form-header">Edit Household</h1>
    </div>

    <!-- Modal Content: everything else -->
    <div class="form-modal-content">
      <h2 class="sub-header">HOUSEHOLD INFORMATION</h2>
      <br>
      <!-- Form Proper -->
      <div class="input_container">
          <label class="form" for="household_name">Household Name</label>
          <input type="text" id="edit_household_name" name="household_name" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="address">Address</label>
          <input type="text" id="edit_address" name="address" class="attribs" placeholder="">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="contact_number">Contact Number</label>
          <input type="text" id="edit_contact_number" name="contact_number" class="attribs" placeholder="">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="residency_status">Residency Status</label>
          <input type="text" id="edit_residency_status" name="residency_status" class="attribs" placeholder=""> 
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="HOA/NOA">Part of HOA / NOA</label>
          <input type="text" id="edit_HOA/NOA" name="HOA/NOA" class="attribs" placeholder=""> 
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="nearest_evacuation_area">Nearest Evacuation Area</label>
          <input type="text" id="edit_nearest_evacuation_area" name="nearest_evacuation_area" class="attribs" placeholder="">    
      </div>
      <br>
      <h2 class="sub-header">RESIDENT INFORMATION</h2>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_residents">Number of Residents</label>
          <input type="text" id="edit_number_of_residents" name="number_of_residents" class="attribs" placeholder="">    
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_minor_residents">Number of Minor Residents</label>
          <input type="text" id="edit_number_of_minor_residents" name="number_of_minor_residents" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_senior_residents">Number of Senior Citizen Residents</label>
          <input type="text" id="edit_number_of_senior_residents" name="number_of_senior_residents" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_pwd_residents">Number of PWD Residents</label>
          <input type="text" id="edit_number_of_pwd_residents" name="number_of_pwd_residents" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_sick_residents">Number of Sick Residents</label>
          <input type="text" id="edit_number_of_sick_residents" name="number_of_sick_residents" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="form" for="number_of_pregnant_residents">Number of Pregnant Residents</label>
          <input type="text" id="edit_number_of_pregnant_residents" name="number_of_pregnant_residents" class="attribs" placeholder="">
      </div>
      <br>
      <h2 class="sub-header">RISK LEVELS</h2>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="earthquake">Earthquake</label>
          <select name="earthquake_level" id="edit_earthquake_risk_level" class="attribs">
              <option id="default_earthquake" value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="text" id="edit_earthquake_desc" name="earthquake" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="fire">Fire</label>
          <select name="fire_level" id="edit_fire_risk_level" class="attribs">
              <option id="default_fire" value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="text" id="edit_fire_desc" name="fire" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="flood">Flood</label>
          <select name="flood_level" id="edit_flood_risk_level" class="attribs">
              <option id="default_flood" value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="edit_flood_desc" name="flood" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="landslide">Landslide</label>
          <select name="landslide_level" id="edit_landslide_risk_level" class="attribs">
              <option id="default_landslide" value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="edit_landslide_desc" name="landslide" class="attribs" placeholder="">
      </div>
      <br>
      <div class="input_container">
          <label class="disaster-form" for="storm">Storm</label>
          <select name="storm_level" id="edit_storm_risk_level" class="attribs">
              <option id="default_storm" value="" disabled selected hidden></option>
              <option value="high">HIGH</option>
              <option value="medium">MEDIUM</option>
              <option value="low">LOW</option>
          </select>
          <input type="email" id="edit_storm_desc" name="storm" class="attribs" placeholder="">
      </div>
      <!-- save and Delete buttons -->
      <div class="button-container">
        <div>
          <!-- submits contents of the form -->                                               
          <button class="confirm form" type="submit" id="submit_form" name="submit_form">Save</button>   
        </div>
        <div>
          <!-- clears all contents of the form -->
          <button class="clear form">Delete</button>
        </div>
      </div>
    </div>

    <!-- modal Footer: empty space -->
     <div class="formModalFooter"></div>
  </div>
  
  <!--script for map-->
  <script type="module" src="js/index.js"></script>

  <!--script for collapsibles-->
  <script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var colcontent = this.nextElementSibling;
        if (colcontent.style.display === "block") {
          colcontent.style.display = "none";
          coll.style.transform = "none";
        } else {
          colcontent.style.display = "block";
          coll.style.transform = "rotate(180deg)";
        }
      });
    }
  </script>

  <!--script for search bar-->
  <script>
    function searchEntries() {
      var input = document.querySelector('.search-bar').value.toUpperCase();
      var ul = document.getElementById("locationList");
      var li = ul.getElementsByTagName('li');
      for (var i = 0; i < li.length; i++) {
        var a = li[i].getElementsByTagName("a")[0];
        var txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(input) > -1) {
          li[i].style.display = "";
        } else {
          li[i].style.display = "none";
        }
      }
    }
  </script>
</body>

</html>